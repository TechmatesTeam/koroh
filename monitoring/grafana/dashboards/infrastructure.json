{
    "dashboard": {
        "id": null,
        "title": "Koroh Infrastructure",
        "tags": [
            "koroh",
            "infrastructure",
            "system"
        ],
        "style": "dark",
        "timezone": "browser",
        "editable": true,
        "panels": [
            {
                "id": 1,
                "title": "System Resources",
                "type": "row",
                "collapsed": false,
                "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 0
                }
            },
            {
                "id": 2,
                "title": "CPU Usage",
                "type": "graph",
                "targets": [
                    {
                        "expr": "100 - (avg by (instance) (rate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100)",
                        "legendFormat": "{{instance}} CPU Usage"
                    }
                ],
                "yAxes": [
                    {
                        "unit": "percent",
                        "max": 100,
                        "min": 0
                    }
                ],
                "gridPos": {
                    "h": 8,
                    "w": 8,
                    "x": 0,
                    "y": 1
                }
            },
            {
                "id": 3,
                "title": "Memory Usage",
                "type": "graph",
                "targets": [
                    {
                        "expr": "(1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100",
                        "legendFormat": "{{instance}} Memory Usage"
                    }
                ],
                "yAxes": [
                    {
                        "unit": "percent",
                        "max": 100,
                        "min": 0
                    }
                ],
                "gridPos": {
                    "h": 8,
                    "w": 8,
                    "x": 8,
                    "y": 1
                }
            },
            {
                "id": 4,
                "title": "Disk Usage",
                "type": "graph",
                "targets": [
                    {
                        "expr": "(1 - (node_filesystem_avail_bytes{fstype!=\"tmpfs\"} / node_filesystem_size_bytes{fstype!=\"tmpfs\"})) * 100",
                        "legendFormat": "{{instance}} {{mountpoint}}"
                    }
                ],
                "yAxes": [
                    {
                        "unit": "percent",
                        "max": 100,
                        "min": 0
                    }
                ],
                "gridPos": {
                    "h": 8,
                    "w": 8,
                    "x": 16,
                    "y": 1
                }
            },
            {
                "id": 5,
                "title": "Database Performance",
                "type": "row",
                "collapsed": false,
                "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 9
                }
            },
            {
                "id": 6,
                "title": "Database Connections",
                "type": "graph",
                "targets": [
                    {
                        "expr": "django_db_connections_total",
                        "legendFormat": "Active Connections"
                    }
                ],
                "gridPos": {
                    "h": 8,
                    "w": 8,
                    "x": 0,
                    "y": 10
                }
            },
            {
                "id": 7,
                "title": "Database Query Duration",
                "type": "graph",
                "targets": [
                    {
                        "expr": "histogram_quantile(0.95, rate(django_db_execute_duration_seconds_bucket[5m]))",
                        "legendFormat": "95th percentile"
                    },
                    {
                        "expr": "histogram_quantile(0.50, rate(django_db_execute_duration_seconds_bucket[5m]))",
                        "legendFormat": "50th percentile"
                    }
                ],
                "yAxes": [
                    {
                        "unit": "s"
                    }
                ],
                "gridPos": {
                    "h": 8,
                    "w": 8,
                    "x": 8,
                    "y": 10
                }
            },
            {
                "id": 8,
                "title": "Database Operations",
                "type": "graph",
                "targets": [
                    {
                        "expr": "rate(django_db_execute_total[5m])",
                        "legendFormat": "{{vendor}} operations"
                    }
                ],
                "yAxes": [
                    {
                        "unit": "ops/sec"
                    }
                ],
                "gridPos": {
                    "h": 8,
                    "w": 8,
                    "x": 16,
                    "y": 10
                }
            },
            {
                "id": 9,
                "title": "Cache Performance",
                "type": "row",
                "collapsed": false,
                "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 18
                }
            },
            {
                "id": 10,
                "title": "Redis Memory Usage",
                "type": "graph",
                "targets": [
                    {
                        "expr": "redis_memory_used_bytes",
                        "legendFormat": "Memory Used"
                    },
                    {
                        "expr": "redis_memory_max_bytes",
                        "legendFormat": "Memory Limit"
                    }
                ],
                "yAxes": [
                    {
                        "unit": "bytes"
                    }
                ],
                "gridPos": {
                    "h": 8,
                    "w": 8,
                    "x": 0,
                    "y": 19
                }
            },
            {
                "id": 11,
                "title": "Cache Hit Rate",
                "type": "graph",
                "targets": [
                    {
                        "expr": "rate(django_cache_get_hits_total[5m]) / (rate(django_cache_get_hits_total[5m]) + rate(django_cache_get_misses_total[5m])) * 100",
                        "legendFormat": "Cache Hit Rate"
                    }
                ],
                "yAxes": [
                    {
                        "unit": "percent",
                        "max": 100,
                        "min": 0
                    }
                ],
                "gridPos": {
                    "h": 8,
                    "w": 8,
                    "x": 8,
                    "y": 19
                }
            },
            {
                "id": 12,
                "title": "Redis Operations",
                "type": "graph",
                "targets": [
                    {
                        "expr": "rate(redis_commands_processed_total[5m])",
                        "legendFormat": "Commands/sec"
                    }
                ],
                "yAxes": [
                    {
                        "unit": "ops/sec"
                    }
                ],
                "gridPos": {
                    "h": 8,
                    "w": 8,
                    "x": 16,
                    "y": 19
                }
            },
            {
                "id": 13,
                "title": "Task Queue Performance",
                "type": "row",
                "collapsed": false,
                "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 27
                }
            },
            {
                "id": 14,
                "title": "Celery Task Processing",
                "type": "graph",
                "targets": [
                    {
                        "expr": "rate(koroh_celery_tasks_processed_total[5m])",
                        "legendFormat": "{{task_name}} - {{status}}"
                    }
                ],
                "yAxes": [
                    {
                        "unit": "tasks/sec"
                    }
                ],
                "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 28
                }
            },
            {
                "id": 15,
                "title": "Pending Tasks by Queue",
                "type": "graph",
                "targets": [
                    {
                        "expr": "koroh_celery_tasks_pending",
                        "legendFormat": "{{queue_name}}"
                    }
                ],
                "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 28
                }
            },
            {
                "id": 16,
                "title": "Network & HTTP",
                "type": "row",
                "collapsed": false,
                "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 36
                }
            },
            {
                "id": 17,
                "title": "HTTP Request Rate",
                "type": "graph",
                "targets": [
                    {
                        "expr": "rate(django_http_requests_total[5m])",
                        "legendFormat": "{{method}} {{status}}"
                    }
                ],
                "yAxes": [
                    {
                        "unit": "reqps"
                    }
                ],
                "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 37
                }
            },
            {
                "id": 18,
                "title": "HTTP Response Time",
                "type": "graph",
                "targets": [
                    {
                        "expr": "histogram_quantile(0.95, rate(django_request_duration_seconds_bucket[5m]))",
                        "legendFormat": "95th percentile"
                    },
                    {
                        "expr": "histogram_quantile(0.50, rate(django_request_duration_seconds_bucket[5m]))",
                        "legendFormat": "50th percentile"
                    }
                ],
                "yAxes": [
                    {
                        "unit": "s"
                    }
                ],
                "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 12,
                    "y": 37
                }
            }
        ],
        "time": {
            "from": "now-1h",
            "to": "now"
        },
        "refresh": "30s",
        "schemaVersion": 27,
        "version": 1
    }
}